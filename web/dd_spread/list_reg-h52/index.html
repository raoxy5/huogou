<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title>年度盛惠•1元专场</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/swiper-3.3.1.min.css">
    <link rel="stylesheet" href="css/animate.min.css">
	<script src="js/jquery.min.js"></script>
    <script src="js/swiper-3.3.1.jquery.min.js"></script>
    <script src="js/swiper.animate1.0.2.min.js"></script>
    <script src="js/imgLoader.js"></script>
    <script src="js/register.js"></script>
    <script>
        $(function () {
		//获取地址栏传过来参数
            function GetQueryString(data)
            {
                var reg = new RegExp("(^|&)"+ data +"=([^&]*)(&|$)");
                var r = window.location.search.substr(1).match(reg);
                if(r!=null)return  unescape(r[2]); return null;
            }
            var phoneStr = GetQueryString('phoneStr');
            if(phoneStr=='h'){
                //替换为伙购的图片
                $('#logo').attr('src','img/section1/se1-h.png');
				$('#se2-h').attr('src','img/section2/se1-h.png');
				$('#se3-h').attr('src','img/section3/se1-h.png');
				$('#se4-h').attr('src','img/section4/se1-h.png');
				$('#se5-h').attr('src','img/section5/se1-h.png');
				$('#alerttop').attr('src','img/section6/alerttop-h.png');
				$('#reg-sueccess').attr('src','img/reg-sueccess_01-h.png');
            }
                       
        });
    </script>
    <style>
        .loading-box { width: 60px; height: 80px; font-size: 20px; text-align: center;position: absolute; z-index: 999;color:#000;left: 50%;top: 50%;margin-left: -30px;margin-top: -40px; }
        .loading-txt { padding-top: 10px;color: #67CF22;font-size: 14px; }
        .popup-mask { position: fixed; z-index: 81; top: 0; left: 0; width: 100%; height: 100%; background: #fff; }
        .load-egg { width: 60px;}
        .spinner {
            width: 60px;
            height: 60px;
            position: relative;
        }
        .double-bounce1, .double-bounce2 {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background-color: #67CF22;
            opacity: 0.6;
            position: absolute;
            top: 0;
            left: 0;
            -webkit-animation: bounce 2.0s infinite ease-in-out;
            animation: bounce 2.0s infinite ease-in-out;
        }

        .double-bounce2 {
            -webkit-animation-delay: -1.0s;
            animation-delay: -1.0s;
        }

        @-webkit-keyframes bounce {
            0%, 100% { -webkit-transform: scale(0.0) }
            50% { -webkit-transform: scale(1.0) }
        }

        @keyframes bounce {
            0%, 100% {
                transform: scale(0.0);
                -webkit-transform: scale(0.0);
            } 50% {
                  transform: scale(1.0);
                  -webkit-transform: scale(1.0);
              }
        }
        .none { display: none; }
    </style>
</head>
<body style="max-width: 640px;margin: auto;">
<div id="popup-mask" class="popup-mask"></div>
<div class="loading" id="loading">
        <div class="loading-box pa">
            <div class="load-egg clearfix" id="load-egg">
                <div class="spinner">
                    <!-- <div class="rect1"></div>
                    <div class="rect2"></div>
                    <div class="rect3"></div>
                    <div class="rect4"></div>
                    <div class="rect5"></div> -->
                    <div class="double-bounce1"></div>
                    <div class="double-bounce2"></div>
                </div>
            </div>
            <div class="loading-txt" id="loading-txt"><span id="loadingPerdent">0%</span></div>
        </div>
    </div>

<div class="swiper-container">
    <div class="swiper-wrapper">
        <div class="head swiper-slide">
            <img src="img/section1/se1.png" id="logo" class="ani resize" style="width:80px;height:45px;left:0;top:0;z-index:5;" swiper-animate-effect="slideInUp" swiper-animate-duration="0.3s" swiper-animate-delay="0.3s"/>
            <img src="img/section1/se5.png" class="ani resize" style="width:320px;height:193px;left:0;top:300px;z-index:5;" swiper-animate-effect="slideInUp" swiper-animate-duration="0.3s" swiper-animate-delay="0.3s"/>

            <img src="img/section1/se2.png" class="ani resize" style="width:280px;height:79px;left:25px;top:35px;z-index:5;" swiper-animate-effect="slideInUp" swiper-animate-duration="0.3s" swiper-animate-delay="0.3s"/>
            <img src="img/section1/se3.png" class="ani resize" style="width:156px;height:101px;left:80px;top:125px;z-index:5;" swiper-animate-effect="slideInUp" swiper-animate-duration="0.3s" swiper-animate-delay="0.3s"/>
            <img src="img/section1/se4.png" class="ani resize" style="width:230px;height:73px;left:45px;top:240px;z-index:5;" swiper-animate-effect="slideInUp" swiper-animate-duration="0.3s" swiper-animate-delay="0.3s"/>
        </div>
        <div class="sub-content sub-list1 swiper-slide">

            <img src="img/section2/se1.png" id="se2-h" class="resize ani" style="width:140px;height:184px;left:90px;top:20px;z-index:5;" swiper-animate-effect="zoomIn" swiper-animate-duration="0.5s" swiper-animate-delay="0.3s"/>
            <img src="img/section2/se2.png" class="resize ani" style="width:220px;height:198px;left:80px;top:210px;z-index:5;" swiper-animate-effect="rollIn" swiper-animate-duration="0.5s" swiper-animate-delay="0.7s"/>

            <a href="javascript:;" class="link-btn"><img src="img/section2/se3.png" class="resize ani"  swiper-animate-effect="zoomIn" swiper-animate-duration="0.5s" swiper-animate-delay="0.5s" style="width:170px;height:30px;left:80px;top:425px;z-index:5;"/></a>

        </div>
        <div class="sub-content sub-list2 swiper-slide">
            <img src="img/section3/se1.png" id="se3-h" class="resize ani" swiper-animate-effect="fadeInDown" swiper-animate-duration="0.5s" swiper-animate-delay="0.3s" style="width:140px;height:184px;left:90px;top:20px;z-index:5;"/>
            <img src="img/section3/se2.png" class="resize ani" swiper-animate-effect="lightSpeedIn" swiper-animate-duration="0.5s" swiper-animate-delay="0.7s" style="width:220px;height:198px;left:80px;top:210px;z-index:5;"/>

            <a href="javascript:;" class="link-btn"><img src="img/section3/se3.png" class="resize ani" swiper-animate-effect="fadeInUp" swiper-animate-duration="0.5s" swiper-animate-delay="0.5s" style="width:170px;height:30px;left:80px;top:425px;z-index:5;"/></a>

        </div >
        <div class="sub-content sub-list3 swiper-slide">
            <img src="img/section4/se1.png" id="se4-h" class="resize ani" swiper-animate-effect="bounceInLeft" swiper-animate-duration="0.5s" swiper-animate-delay="0.3s" style="width:140px;height:184px;left:90px;top:20px;z-index:5;"/>
            <img src="img/section4/se2.png" class="resize ani" swiper-animate-effect="bounceInUp" swiper-animate-duration="0.5s" swiper-animate-delay="0.7s" style="width:220px;height:198px;left:80px;top:210px;z-index:5;"/>

            <a href="javascript:;" class="link-btn"><img src="img/section4/se3.png" class="resize ani" swiper-animate-effect="bounceInRight" swiper-animate-duration="0.5s" swiper-animate-delay="0.5s" style="width:170px;height:35px;left:80px;top:425px;z-index:5;"/></a>

        </div>
        <div class="sub-content sub-list4 swiper-slide">
            <img src="img/section5/se1.png" id="se5-h" class="resize ani" swiper-animate-effect="slideInDown" swiper-animate-duration="0.5s" swiper-animate-delay="0.3s" style="width:140px;height:184px;left:90px;top:20px;z-index:5;"/>
            <img src="img/section5/se2.png" class="resize ani" swiper-animate-effect="rotateIn" swiper-animate-duration="0.5s" swiper-animate-delay="0.7s" style="width:220px;height:198px;left:80px;top:210px;z-index:5;"/>

            <a href="javascript:;" class="link-btn"><img src="img/section5/se3.png" class="resize ani" swiper-animate-effect="slideInUp" swiper-animate-duration="0.5s" swiper-animate-delay="0.5s" style="width:170px;height:30px;left:80px;top:425px;z-index:5;"/></a>
        </div>
    </div>
    <!--<div class="swiper-pagination"></div>-->
    <div class="swipe-tip"></div>
</div>

<!--音乐控制-->
<div id="music" class="music cmp hua-play">
    <audio id="music_audio" class="audio" loop="loop"  preload="auto" src="img/tongku.m4a"></audio>
    <div class="control" id="control">
        <div class="control-after"></div>
    </div>
</div>
<!--安卓弹出层-->
<div id="m_popUp" class="m_popUp" style="display: none;">
    <div class="m_guide"></div>
    <div class="m_con">
        <img src="img/android.png" style="width: 90%;margin: 0 auto" id="pic">
        <a class="m_middle" id="m_middle" href="http://down.cgyyg.com/down.php" target="_blank">立即下载APP</a>
    </div>
    <!--<cite class="m_zx"></cite>-->
</div>
<!--苹果注册弹出框-->
<div id="m_popUp_ios" class="m_popUp" style="display:none;">
    <div class="m_guide"></div>
    <div class="m_con m_con_ios">
        <ul>
            <li class="accAndPwd">
                <input class="ipt" id="userMobile" maxlength="11" type="tel" placeholder="请输入您的手机号码" />
            </li>
            <li>
                <input style="width:63.5%;float: left;" class="ipt" id="mobileCode" type="text" value="" placeholder="6位验证码">
                <button type="button" class="sendCode" href="javascript:void(0);">获取验证码</button>
            </li>
            <li class="accAndPwd">
                <input class="ipt" id="userPassword" maxlength="20" type="password" placeholder="请输入8-25位密码" />
            </li>
            <li>
                <img src="img/section6/alerttop.png" id="alerttop" style="width: 100%;position: absolute;bottom: 90%;left: 0;"/>
                <button type="button" id="regSubmit" href="javascript:;" class="orangeBtn">一键注册</button>
            </li>
        </ul>

    </div>
</div>
<!--苹果注册成功后弹出-->
<div class="m_popUpTip m_popUp" style="display: none;">
    <div class="m_guide"></div>
    <div class="m_con">
        <img src="img/reg-sueccess_01.png" id="reg-sueccess" style="width: 90%;margin: 0 auto;">
        <a class="m_middle" href="http://down.cgyyg.com/down.php" target="_blank"><img src="img/reg-sueccess_02.png" style="width: 90%"></a>

    </div>
    <!--<cite class="m_zx"></cite>-->
</div>

<div class="footer">
    <div class="guod_g">
        <div class="wrap wrap_r reg_before" style="display: none;">
            <!--<button type="button" class="close">关闭</button>-->
            <!--<p>温馨提示</p>-->
            <p class="two" style="line-height: 1.4em;">您手机号已经注册<br>请下载APP参与夺宝</p>
            <p><span style="padding: 0.2em 1em; background-color: #ef2828;" class="off"><a style="color: #fff;" href="http://down.cgyyg.com/down.php">立即下载APP</a></span></p>
        </div>
        <div class="wrap wrap_r reg_notice" style="display: none;">
            <!--<button type="button" class="close">关闭</button>-->
            <!--<p>注册提示</p>-->
            <p class="two"></p>
        </div>
    </div>
</div>
<script>

    var inWidth=window.innerWidth;
    var inHeight=window.innerHeight;
    var scaleW,
        scaleH;

    var inBi=320/480;
    if((inWidth/inHeight)>inBi){
        var w=inHeight*inBi;
        document.body.style.width=w+'px';
        // document.getElementById("m_popUp_ios").style.width=w+'px';
        document.body.style.margin='0 auto';
        //document.getElementById("m_popUp_ios").style.margin='0 auto';
         scaleW=document.body.clientWidth/320;
         scaleH=inHeight/480;
    }
    else{
        var h=inWidth/inBi;
        document.body.style.height=h+'px';
        //document.getElementById("m_popUp_ios").style.height=h+'px';
        document.body.style.marginTop=(inHeight-h)/2+'px';
        // document.getElementById("m_popUp_ios").style.marginTop=(inHeight-h)/2+'px';
        scaleW=inWidth/320;
        scaleH=document.body.clientHeight/480;
    }
    var resizes = document.querySelectorAll('.resize');
    for (var j=0; j<resizes.length; j++) {
        resizes[j].style.width=parseInt(resizes[j].style.width)*scaleW+'px';
        resizes[j].style.height=parseInt(resizes[j].style.height)*scaleH+'px';
        resizes[j].style.top=parseInt(resizes[j].style.top)*scaleH+'px';
        resizes[j].style.left=parseInt(resizes[j].style.left)*scaleW+'px';
    }


    $(function () {
        //预加载图片

    imgLoader(['img/android.png', 'img/reg-sueccess_01.png', 'img/reg-sueccess_02.png', 'img/web-swipe-tip.png', 'img/section1/se1.png', 'img/section1/se2.png', 'img/section2/se1.png', 'img/section1/se2.png', 'img/section1/se5.png', 'img/section1/se-bg.png', 'img/section2/se1.png', 'img/section2/se2.png', 'img/section2/se3.png', 'img/section3/se1.png', 'img/section3/se2.png', 'img/section3/se3.png', 'img/section4/se1.png', 'img/section4/se2.png','img/section4/se3.png','img/section5/se1.png','img/section5/se2.png','img/section5/se3.png','img/section6/alerttop.png','img/section6/zhuce.png','img/music.gif','img/music_off.png'], function (percentage)
      {
            var percentT = percentage * 100;
            $('#loadingPerdent').html( + (parseInt(percentT)) + '%');
           //$('#loader__progress')[0].style.width = percentT + '%';
            if (percentage == 1) {
                //$('#loader').remove();
               // Swipe.init();
               //加载完成
                    $("#loading").addClass("none").html("");
                    $("#popup-mask").addClass("none").html("");
                    //选择声音文件
                    var audioEle = $("#music_audio")[0];
                    //初始化swiper插件
                    var mySwiper = new Swiper('.swiper-container',{
                        onInit: function(swiper){ //Swiper2.x的初始化是onFirstInit
                            swiperAnimateCache(swiper);
                            swiperAnimate(swiper);
                        },
                        onSlideChangeStart: function(swiper){
                            //滑动开始前执行图片居中
                            // checkheight();
                            //给每一页不同的slide的body换背景
                            checkBg();
                        },
                        onSlideChangeEnd: function(swiper){
                            //滑入动画
                            swiperAnimate(swiper);

                            //检查是否到了最后一页，屏蔽提示
                            //checkEnd();
                            //检测是安卓还是ios
                            /*if(mySwiper.isEnd){
                                //checkAlert();
                                //mySwiper.slideTo(0, 3000, true);//切换到第一个slide，速度为1秒
                            }*/
                        },
                        /*onReachBeginning: function(swiper){
                         //到了第一页
                         $('.swipe-tip').show();
                         },*/
                        onReachEnd: function(swiper){
                            //到了最后一页
                            // $('.swipe-tip').hide();
                        },
                        onTouchEnd:function(){   /*手指滑动时，判断手指滑动的方向*/
                            /*if(mySwiper.isEnd){
                             var   m_popUp=$("#m_popUp_ios"),
                             m_con=$('.m_con_ios');
                             m_popUp.css('display','block');
                             }*/
                            var flag_music=$('#music');
                            if(audioEle.paused){
                                if(flag_music.hasClass('hua-play')){
                                    audioEle.play();
                                    $('.control').addClass('control-on');
                                }
                             }
                        },
                        direction: 'vertical',
                        //pagination: '.swiper-pagination',
                        mousewheelControl : true,
                        loop:true,
                        //autoHeight: true, //高度随内容变化
                    });
            }
        });
        
        //判断是否是结尾
        function checkEnd() {
            if(mySwiper.isEnd){
                $('.swipe-tip').hide();
            }else{
                $('.swipe-tip').show();
            }
        }
        //var acIndex=mySwiper.activeIndex;

        //换背景
        function checkBg(){
            var acIndex=$('.swiper-slide.swiper-slide-active').attr('data-swiper-slide-index');
             /*if(acIndex<0){acIndex=0}*/

            console.log(acIndex);
            if(acIndex==0){
                document.body.style.backgroundColor='#4294f1';
                document.body.style.backgroundImage='url(img/section1/se-bg.png)';
            }
            else if(acIndex==1){
                document.body.style.backgroundColor='#814ec7';
                document.body.style.backgroundImage='none';
            }
            else if(acIndex==2){
                document.body.style.backgroundColor='#4ea9c7';
                document.body.style.backgroundImage='none';
            }
            else if(acIndex==3){
                document.body.style.backgroundColor='#c74eba';
                document.body.style.backgroundImage='none';
            }
            else{
                document.body.style.backgroundColor='#34b989';
                document.body.style.backgroundImage='none';
            }
        }
        //checkBg();
		
		//判断手机平台
		if(isIos() || is_weixn() )
        {
            // iPhone
            $('.link-btn').click(function(){
               // window.location=regiUrl;
               var pic=$("#pic"),
                       m_popUp=$("#m_popUp_ios"),
                       m_con=$('.m_con_ios');

                m_popUp.css('display','block');

                var winHight=$(window).height();
                var conHeight=m_con.height();

                pic.attr('src','img/ios.png');
                //m_middle.attr({'href':'./register.html','target':'_parent'});
                /*if(winHight>conHeight){
                    var curHeight=(winHight-conHeight)/2;
                    m_con.css('margin-top',curHeight);
                }*/
            });
            $('#urlBut').text('立即注册');

         }
        else
        {
            //Android ;
            $('.link-btn').click(function(){
                //window.location=url;
                var m_con=$('.m_con');
                var m_popUp=$("#m_popUp");
                m_popUp.css('display','block');
                //m_popUp.show();
                var winHight=$(window).height();
                var conHeight=m_con.height();
                if(winHight>conHeight){
                    var curHeight=(winHight-conHeight)/2;
                    m_con.css('margin-top',curHeight);
                }
            });
         }
        //关闭弹层
        $('.m_guide').on('click',function () {
            $(this).parent('.m_popUp').css('display','none');
        });
        //控制音乐
        $('.control').on('click',function(){
            var obj=$(this);
            var audioEle = $("#music_audio")[0];//jquery选择器获得的是jquery对象，0对象的才是对应的节点对象
            var flag_music=$('#music');
            if(audioEle.paused){
                audioEle.play();	//播放
                obj.addClass('control-on');
                flag_music.removeClass('stopped');
            }else{
                audioEle.pause();	//暂停
                flag_music.addClass('stopped').removeClass('hua-play');
                obj.removeClass('control-on');
            }
        });
    });

</script>
</body>
</html>